connector:
  name: Unified OT Zerobus Connector Client
  log_level: INFO
  log_file: unified_connector.log

bridge:
  autostart: false

web_ui:
  enabled: true
  host: 0.0.0.0
  port: 8080
  auto_open_browser: false

discovery:
  enabled: true
  network:
    scan_enabled: true
    scan_interval_sec: 300
    subnets:
    - 127.0.0.1/32
    # Add your LAN subnet so discovery can find non-local OT endpoints too
    - 192.168.20.0/24
  opcua:
    enabled: true
    default_port: 4841
    timeout_sec: 5.0
  mqtt:
    enabled: true
    default_port: 1883
    default_tls_port: 8883
    timeout_sec: 3.0
  modbus:
    enabled: true
    default_tcp_port: 502
    alt_tcp_port: 5020
    timeout_sec: 2.0

sources:
- name: ot-simulator-opcua
  protocol: opcua
  endpoint: opc.tcp://127.0.0.1:4841
  enabled: true
  security_mode: None
  normalization_enabled: false
  polling_mode: true
  polling_interval_ms: 1000
  subscription_mode: false
- name: modbus-127-0-0-1-5020
  protocol: modbus
  endpoint: modbus://127.0.0.1:5020
  enabled: true
- name: mqtt-127-0-0-1-1883
  protocol: mqtt
  endpoint: mqtt://127.0.0.1:1883
  enabled: true

normalization:
  enabled: true
  path_template: '{site}/{area}/{line}/{equipment}/{signal_type}/{tag_name}'
  default_context:
    site: plant1
    area: production
    line: line1
    equipment: default
  quality_mapping:
    opcua:
      good:
      - 0
      uncertain:
      - 64
      - 65
      - 66
      bad:
      - 128
      - 129
      - 130
    mqtt:
      good:
      - online
      - connected
      bad:
      - offline
      - disconnected
    modbus:
      good:
      - 0
      bad:
      - 1
      - 2
      - 3
      - 4

zerobus:
  enabled: true
  workspace_host: ""
  zerobus_endpoint: ""
  default_target:
    workspace_host: ""
    catalog: opcua
    schema: scada_data
    table: opcua_events_bronze
  auth:
    client_id: ""
    client_secret: ""
  batch:
    max_records: 1000
    timeout_seconds: 5.0
  source_targets: {}

backpressure:
  max_queue_size: 50000
  drop_policy: oldest
  disk_spool:
    enabled: true
    directory: ./spool
    max_size_mb: 500
    compression: gzip

credentials:
  storage:
    type: encrypted
    file: ~/.unified_connector/credentials.enc

monitoring:
  health_check:
    enabled: true
    port: 8081
  prometheus:
    enabled: true
    port: 9090
    path: /metrics
  stats:
    enabled: true
    update_interval_seconds: 10

performance:
  max_concurrent_connections: 100
  connection_pool_size: 20
  read_buffer_size: 8192
  write_buffer_size: 8192

